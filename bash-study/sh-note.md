### Linux命令笔记

* 查看所有网卡的网卡名称
```
	ifconfig -a | sed 's/[ \t].*//;/^\(lo\|\)$/d'   (Ubuntu 可用 CentOs会多个冒号)
	ls /sys/class/net/ 
```

* 脚本数值比较操作符

  符号  |  说明
  :---:|:-----:
  -eq  |  等于
  -ne  |  不等于
  -gt  |  大于
  -lt  |  小于
  -ge  |  大于等于
  -le  |  小于等于

* set -e : Exit immediately if a command exits with a non-zero status 如果有非0的结果直接退出脚本

* sudo apt-get install rng-tools && sudo rngd -r /dev/urandom
  生成随机数, 帮助gpg生成key

* cd !$ 把上个命令的参数作为cd参数使用
* cd - 返回进入此目录之前所在的目录


### centos 7 firewall 启动和停止命令

#### 安装
 yum install iptables-services -y
#### 启动
* systemctl enable firewalld
* systemctl start firewalld
* systemctl status firewalld   // running </br>

### 停止
* systemctl disable firewalld
* systemctl stop firewalld
* systemctl status firewalld   // not running

### centos 7 iptables 启动和停止命令
#### 启动
* systemctl restart iptables
* systemctl start iptables

#### 停止
* systemctl stop iptables

#### 重载
* systemctl resload iptables

#### centos 7 iptables 规则添加 docker
* 运行 iptables-save > /etc/sysconfig/iptables  编辑并添加
```
 *nat
 :PREROUTING ACCEPT [27:11935]
 :INPUT ACCEPT [0:0]
 :OUTPUT ACCEPT [598:57368]
 :POSTROUTING ACCEPT [591:57092]
 :DOCKER - [0:0]
 -A PREROUTING -m addrtype --dst-type LOCAL -j DOCKER
 -A OUTPUT ! -d 127.0.0.0/8 -m addrtype --dst-type LOCAL -j DOCKER
 -A POSTROUTING -s 172.17.0.0/16 ! -o docker0 -j MASQUERADE
 COMMIT
 # Completed on Sun Sep 20 17:35:31 2015
 # Generated by iptables-save v1.4.21 on Sun Sep 20 17:35:31 2015
 *filter
 :INPUT ACCEPT [139291:461018923]
 :FORWARD ACCEPT [0:0]
 :OUTPUT ACCEPT [127386:5251162]
 :DOCKER - [0:0]
 -A FORWARD -o docker0 -j DOCKER
 -A FORWARD -o docker0 -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
 -A FORWARD -i docker0 ! -o docker0 -j ACCEPT
 -A FORWARD -i docker0 -o docker0 -j ACCEPT
 COMMIT
 # Completed on Sun Sep 20 17:35:31 2015
```
* 运行 systemctl restart iptables 重启 iptables
* 运行 sudo iptables -L | grep DOCKER 如果显示
```
DOCKER     all  --  anywhere             anywhere
Chain DOCKER (1 references)
```
则没问题

##### 使用 du 命令查看当前目录下文件夹的大小(不递归支持看1级子目录)
```
    du -h --max-depth=1 ./    
```

##### 输入输出流重定向
```
    ./test < /etc/group > std.out 2> std.err
    分别将 输入流重定向到 /etc/group 标准输出流重定向到文件 std.out 标准错误输出流重定向到文件 std.err
```

###$ ntp 安装和 配置
安装:  yum install ntp

配置: vim /etc/ntp.conf

阿里云ntp server 地址:
```
公网地址: ntp1.aliyun.com  ~ ntp6.aliyun.com 

内网地址: ntp1.cloud.aliyuncs.com   ~ ntp12.cloud.aliyuncs.com  
```

直接执行命令 **ntpdate ntp1.aliyun.com** 也可以更新

### 使用mkdir同时创建多个目录
```
mkdir -p /home/yy152986/{test1/test2,test3/test4}
```
* 注意 **,** 后面没有空格


sed 命令当需要替换的字符串中包含'/' 时可以是有别的分割符来例如:
```
sed -i "s|$var|r_str|g" file_name
```
中

